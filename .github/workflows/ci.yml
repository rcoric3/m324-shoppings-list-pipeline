name: CI for Next.js

on:
  push:
    branches:
      - main

jobs:
  build-and-test:
    runs-on: ubuntu-latest

    steps:
      - name: Check out the repository code
        uses: actions/checkout@v2

      - name: Set up Node.js
        uses: actions/setup-node@v2
        with:
          node-version: '18.18.0' 

      - name: Install dependencies
        run: npm install

      # Schritt 1: Linting-Testschritt hinzuf체gen
      - name: Linting (echo Testlauf)
        run: echo "Running Linting checks..."
      
      # Implementiere Linting mit echo vorerst f체r Debugging
      - name: Run Linting
        run: |
          npm run lint || exit 1
        continue-on-error: false # Die Pipeline schl채gt bei Linting-Fehlern fehl

      # Schritt 2: Test- und Linting-Setup-Test (echo)
      - name: Tests (echo Testlauf)
        run: echo "Running Tests..."

      # Implementiere Testlauf mit echo und Fehlerschutz
      - name: Run Tests
        run: |
          npm test || exit 1
        continue-on-error: false # Pipeline schl채gt bei Test-Fehlern fehl

      - name: Build Next.js app
        run: npm run build

      # Optional: Clean up Node.js modules (zur Wartbarkeit)
      - name: Clean up Node modules
        run: rm -rf node_modules
